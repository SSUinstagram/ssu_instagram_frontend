{"ast":null,"code":"import _toConsumableArray from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import{React,useEffect,useState}from\"react\";import styled from\"styled-components\";import{useNavigate}from\"react-router-dom\";import Header from\"./Header\";import HomeContent from\"./HomeContet\";import axios from\"axios\";import{Pagination}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchCheck=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  margin-top: 50px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  input {\\n    height: 40px;\\n    width: 200px;\\n    border-radius: 3px;\\n  }\\n  button {\\n    height: 40px;\\n    border-radius: 3px;\\n  }\\n  div {\\n    height: 40px;\\n  }\\n\"])));var RadioButton=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 30px;\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  label {\\n    padding: 5px;\\n  }\\n\"])));var PaginationLayout=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n\"])));function Home(){var _useState=useState({text:\"\",type:\"\"}),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cardList=_useState4[0],setCardList=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPage=_useState8[0],setTotalPage=_useState8[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _result$data;var pageRes,total,result,image,imageResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"write/totalPage\");case 2:pageRes=_context.sent;total=pageRes.data;setTotalPage(total);//data fetch get post\n_context.next=7;return axios.get(\"write/getPost\",{params:{page:page}});case 7:result=_context.sent;console.log(result.data);//images\n_context.next=11;return axios.get(\"write/getImage\",{params:{page:page}});case 11:image=_context.sent;console.log(image.data);imageResult=(_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.map(function(item){var _image$data;var images=(_image$data=image.data)===null||_image$data===void 0?void 0:_image$data.filter(function(img){return img.number===item.number;});return _objectSpread(_objectSpread({},item),{},{images:images});});console.log(\"imageresult\",imageResult);setCardList(imageResult);case 16:case\"end\":return _context.stop();}}},_callee);}))();},[page,search]);var onRadioClick=function onRadioClick(e){setSearch(_objectSpread(_objectSpread({},search),{},{type:e.target.value}));};var onSearchTextChange=function onSearchTextChange(e){setSearch(_objectSpread(_objectSpread({},search),{},{text:e.target.value}));};var submitClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"/search\",{params:search});case 2:result=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function submitClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(SearchCheck,{children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\uAC80\\uC0C9\\uC5B4\",type:\"text\",onChange:onSearchTextChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onChange:submitClick,children:\"\\uAC80\\uC0C9\"})]}),/*#__PURE__*/_jsxs(RadioButton,{children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"text\",value:\"id\",onClick:onRadioClick}),\" \",\"\\uC791\\uC131\\uC790\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"text\",value:\"text\",onClick:onRadioClick}),\" \",\"\\uC77C\\uBC18\\uD14D\\uC2A4\\uD2B8\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"text\",value:\"hashtag\",onClick:onRadioClick}),\" \",\"Hashtag\"]})]}),/*#__PURE__*/_jsx(HomeContent,{CardList:cardList}),/*#__PURE__*/_jsx(PaginationLayout,{children:/*#__PURE__*/_jsx(Pagination,{children:_toConsumableArray(Array(totalPage).keys()).map(function(number){return/*#__PURE__*/_jsx(Pagination.Item,{active:page===number,onClick:function onClick(){return setPage(number);},children:number+1});})})})]});}export default Home;","map":{"version":3,"sources":["/home/web29/web_project/client/src/components/home/Home.js"],"names":["React","useEffect","useState","styled","useNavigate","Header","HomeContent","axios","Pagination","SearchCheck","div","RadioButton","PaginationLayout","Home","text","type","search","setSearch","cardList","setCardList","page","setPage","totalPage","setTotalPage","get","pageRes","total","data","params","result","console","log","image","imageResult","map","item","images","filter","img","number","onRadioClick","e","target","value","onSearchTextChange","submitClick","post","Array","keys"],"mappings":"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","sourcesContent":["import { React, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useNavigate } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport HomeContent from \"./HomeContet\";\nimport axios from \"axios\";\nimport { Pagination } from \"react-bootstrap\";\n\nconst SearchCheck = styled.div`\n  width: 100%;\n  margin-top: 50px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  input {\n    height: 40px;\n    width: 200px;\n    border-radius: 3px;\n  }\n  button {\n    height: 40px;\n    border-radius: 3px;\n  }\n  div {\n    height: 40px;\n  }\n`;\nconst RadioButton = styled.div`\n  width: 100%;\n  height: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  label {\n    padding: 5px;\n  }\n`;\nconst PaginationLayout = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`;\n\nfunction Home() {\n  const [search, setSearch] = useState({\n    text: \"\",\n    type: \"\",\n  });\n  const [cardList, setCardList] = useState([]);\n\n  const [page, setPage] = useState(0);\n  const [totalPage, setTotalPage] = useState(0);\n\n  useEffect(() => {\n    (async () => {\n      //get total\n      let pageRes = await axios.get(\"write/totalPage\");\n      const total = pageRes.data;\n      setTotalPage(total);\n      //data fetch get post\n      const result = await axios.get(\"write/getPost\", {\n        params: { page: page },\n      });\n      console.log(result.data);\n\n      //images\n      const image = await axios.get(\"write/getImage\", {\n        params: { page: page },\n      });\n      console.log(image.data);\n\n      const imageResult = result.data?.map((item) => {\n        const images = image.data?.filter((img) => img.number === item.number);\n        return {\n          ...item,\n          images,\n        };\n      });\n\n      console.log(\"imageresult\", imageResult);\n      setCardList(imageResult);\n    })();\n  }, [page, search]);\n\n  const onRadioClick = (e) => {\n    setSearch({\n      ...search,\n      type: e.target.value,\n    });\n  };\n\n  const onSearchTextChange = (e) => {\n    setSearch({\n      ...search,\n      text: e.target.value,\n    });\n  };\n\n  const submitClick = async (e) => {\n    const result = await axios.post(\"/search\", { params: search });\n  };\n\n  return (\n    <div>\n      <Header />\n      <SearchCheck>\n        <input placeholder=\"검색어\" type=\"text\" onChange={onSearchTextChange} />\n        <button type=\"submit\" onChange={submitClick}>\n          검색\n        </button>\n      </SearchCheck>\n      <RadioButton>\n        <label>\n          <input type=\"radio\" name=\"text\" value=\"id\" onClick={onRadioClick} />{\" \"}\n          작성자\n        </label>\n        <label>\n          <input type=\"radio\" name=\"text\" value=\"text\" onClick={onRadioClick} />{\" \"}\n          일반텍스트\n        </label>\n        <label>\n          <input\n            type=\"radio\"\n            name=\"text\"\n            value=\"hashtag\"\n            onClick={onRadioClick}\n          />{\" \"}\n          Hashtag\n        </label>\n      </RadioButton>\n      <HomeContent CardList={cardList} />\n      <PaginationLayout>\n        <Pagination>\n          {[...Array(totalPage).keys()].map((number) => (\n            <Pagination.Item\n              active={page === number}\n              onClick={() => setPage(number)}\n            >\n              {number + 1}\n            </Pagination.Item>\n          ))}\n        </Pagination>\n      </PaginationLayout>\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}