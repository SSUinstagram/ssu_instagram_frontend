{"ast":null,"code":"var _jsxFileName = \"/Users/anjonghun/Desktop/4\\u1112\\u1161\\u11A8\\u1102\\u1167\\u11AB 2\\u1112\\u1161\\u11A8\\u1100\\u1175/\\u110B\\u1170\\u11B8\\u1111\\u1173\\u11AF\\u1106\\u1175\\u11BC/final_project/client/src/components/post/EditPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useLocation } from \"react-router-dom\";\nimport moment from \"moment\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostPanel = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: 20px;\n  text-align: center;\n  align-items: center;\n\n  .content {\n    height: 500px;\n    width: 1000px;\n  }\n`;\n_c = PostPanel;\n\nfunction EditPost() {\n  _s();\n\n  const id = Cookies.get(\"user-id\");\n  const location = useLocation();\n  const [inputPost, setPost] = useState({\n    number: 0,\n    id: \"\",\n    images: [],\n    contents: \"\"\n  });\n  const postInfo = location.state.id;\n  console.log(postInfo);\n  useEffect(() => {\n    (async () => {\n      setPost({ ...inputPost,\n        number: location.state.number,\n        id: location.state.id,\n        contents: location.state.contents,\n        images: location.state.images\n      });\n    })();\n  }, []);\n  console.log(inputPost);\n\n  const handleChangePost = e => {\n    let date = moment().format(\"YYYY-MM-DD HH:mm\");\n    setPost({ ...inputPost,\n      contents: e.target.value,\n      id: id,\n      date: date\n    });\n  };\n\n  const subimtOnClick = async e => {\n    const config = {\n      header: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n\n    try {\n      let result = await axios.post(\"/write/uploadImages\", formData, config);\n      let result2 = await axios.post(\"/write/uploadPost\", inputPost);\n    } catch (err) {\n      alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");\n    } //navigate(\"/Home\");\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(PostPanel, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"content\",\n      placeholder: \"\\uB0B4\\uC6A9\\uC785\\uB825\",\n      type: \"email\",\n      onChange: handleChangePost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      className: \"file\",\n      id: \"file\",\n      name: \"img\",\n      onChange: handleChangeFile,\n      multiple: \"multiple\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      onClick: subimtOnClick,\n      children: \"\\uC804\\uC1A1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditPost, \"D2z0inIcEsClfDh0jp9FoHkiyTo=\", false, function () {\n  return [useLocation];\n});\n\n_c2 = EditPost;\nexport default EditPost;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PostPanel\");\n$RefreshReg$(_c2, \"EditPost\");","map":{"version":3,"sources":["/Users/anjonghun/Desktop/4학년 2학기/웹플밍/final_project/client/src/components/post/EditPost.js"],"names":["React","useState","useEffect","styled","useLocation","moment","Cookies","axios","useNavigate","PostPanel","div","EditPost","id","get","location","inputPost","setPost","number","images","contents","postInfo","state","console","log","handleChangePost","e","date","format","target","value","subimtOnClick","config","header","result","post","formData","result2","err","alert","handleChangeFile"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useLocation } from \"react-router-dom\";\nimport moment from \"moment\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst PostPanel = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: 20px;\n  text-align: center;\n  align-items: center;\n\n  .content {\n    height: 500px;\n    width: 1000px;\n  }\n`;\n\nfunction EditPost() {\n  const id = Cookies.get(\"user-id\");\n  const location = useLocation();\n  const [inputPost, setPost] = useState({\n    number: 0,\n    id: \"\",\n    images: [],\n    contents: \"\",\n  });\n  const postInfo = location.state.id;\n  console.log(postInfo);\n\n  useEffect(() => {\n    (async () => {\n      setPost({\n        ...inputPost,\n        number: location.state.number,\n        id: location.state.id,\n        contents: location.state.contents,\n        images: location.state.images,\n      });\n    })();\n  }, []);\n  console.log(inputPost);\n\n  const handleChangePost = (e) => {\n    let date = moment().format(\"YYYY-MM-DD HH:mm\");\n    setPost({\n      ...inputPost,\n      contents: e.target.value,\n      id: id,\n      date: date,\n    });\n  };\n\n  const subimtOnClick = async (e) => {\n    const config = {\n      header: { \"content-type\": \"multipart/form-data\" },\n    };\n    try {\n      let result = await axios.post(\"/write/uploadImages\", formData, config);\n      let result2 = await axios.post(\"/write/uploadPost\", inputPost);\n    } catch (err) {\n      alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");\n    }\n    //navigate(\"/Home\");\n  };\n\n  return (\n    <PostPanel>\n      <input\n        className=\"content\"\n        placeholder=\"내용입력\"\n        type=\"email\"\n        onChange={handleChangePost}\n      />\n      <input\n        type=\"file\"\n        className=\"file\"\n        id=\"file\"\n        name=\"img\"\n        onChange={handleChangeFile}\n        multiple=\"multiple\"\n      />\n      <button type=\"submit\" onClick={subimtOnClick}>\n        전송\n      </button>\n    </PostPanel>\n  );\n}\n\nexport default EditPost;\n"]},"metadata":{},"sourceType":"module"}