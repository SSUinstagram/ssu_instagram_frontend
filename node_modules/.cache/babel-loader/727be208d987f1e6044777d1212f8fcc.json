{"ast":null,"code":"import _objectSpread from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/web29/web_project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useRef}from\"react\";import styled from\"styled-components\";import moment from\"moment\";import Cookies from\"js-cookie\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostPanel=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  font-size: 20px;\\n  text-align: center;\\n  align-items: center;\\n\\n  .content {\\n    height: 500px;\\n    width: 1000px;\\n  }\\n\"])));function NewPost(){var id=Cookies.get(\"user-id\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var navigate=useNavigate();var _useState3=useState({id:\"\",date:\"\",contents:\"\"}),_useState4=_slicedToArray(_useState3,2),inputPost=_useState4[0],setPost=_useState4[1];var formData=new FormData();var handleChangeFile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(e.target.files.length>5){alert(\"파일 최대 5개만 선택가능\");}else{for(i=0;i<5;i++){formData.append(\"img\",e.target.files[i]);}}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleChangeFile(_x){return _ref.apply(this,arguments);};}();var handleChangePost=function handleChangePost(e){var date=moment().format(\"YYYY-MM-DD HH:mm\");setPost(_objectSpread(_objectSpread({},inputPost),{},{contents:e.target.value,id:id,date:date}));};var subimtOnClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var config,result,result2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={header:{\"content-type\":\"multipart/form-data\"}};_context2.prev=1;_context2.next=4;return axios.post(\"/write/uploadImages\",formData,config);case 4:result=_context2.sent;_context2.next=7;return axios.post(\"/write/uploadPost\",inputPost);case 7:result2=_context2.sent;_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");case 13:navigate(\"/Home\");case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return function subimtOnClick(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(PostPanel,{children:[/*#__PURE__*/_jsx(\"input\",{className:\"content\",placeholder:\"\\uB0B4\\uC6A9\\uC785\\uB825\",type:\"email\",onChange:handleChangePost}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"file\",id:\"file\",name:\"img\",onChange:handleChangeFile,multiple:\"multiple\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:subimtOnClick,children:\"\\uC804\\uC1A1\"})]});}export default NewPost;","map":{"version":3,"sources":["/home/web29/web_project/client/src/components/post/NewPost.js"],"names":["React","useState","useRef","styled","moment","Cookies","axios","useNavigate","PostPanel","div","NewPost","id","get","image","setImage","navigate","date","contents","inputPost","setPost","formData","FormData","handleChangeFile","e","target","files","length","alert","i","append","handleChangePost","format","value","subimtOnClick","config","header","post","result","result2"],"mappings":"ywBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGL,MAAM,CAACM,GAAV,iRAAf,CAeA,QAASC,CAAAA,OAAT,EAAmB,CACjB,GAAMC,CAAAA,EAAE,CAAGN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAX,CACA,cAA0BX,QAAQ,CAAC,EAAD,CAAlC,wCAAOY,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,eAA6BN,QAAQ,CAAC,CACpCU,EAAE,CAAE,EADgC,CAEpCK,IAAI,CAAE,EAF8B,CAGpCC,QAAQ,CAAE,EAH0B,CAAD,CAArC,yCAAOC,SAAP,eAAkBC,OAAlB,eAMA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CAEA,GAAMC,CAAAA,gBAAgB,0FAAG,iBAAOC,CAAP,wHACvB,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,MAAf,CAAwB,CAA5B,CAA+B,CAC7BC,KAAK,CAAC,gBAAD,CAAL,CACD,CAFD,IAEO,CACL,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CAC1BR,QAAQ,CAACS,MAAT,CAAgB,KAAhB,CAAuBN,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeG,CAAf,CAAvB,EACD,CACF,CAPsB,sDAAH,kBAAhBN,CAAAA,gBAAgB,4CAAtB,CAUA,GAAMQ,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACP,CAAD,CAAO,CAC9B,GAAIP,CAAAA,IAAI,CAAGZ,MAAM,GAAG2B,MAAT,CAAgB,kBAAhB,CAAX,CACAZ,OAAO,gCACFD,SADE,MAELD,QAAQ,CAAEM,CAAC,CAACC,MAAF,CAASQ,KAFd,CAGLrB,EAAE,CAAEA,EAHC,CAILK,IAAI,CAAEA,IAJD,GAAP,CAMD,CARD,CAUA,GAAMiB,CAAAA,aAAa,2FAAG,kBAAOV,CAAP,gJACdW,MADc,CACL,CACbC,MAAM,CAAE,CAAE,eAAgB,qBAAlB,CADK,CADK,yCAKC7B,CAAAA,KAAK,CAAC8B,IAAN,CAAW,qBAAX,CAAkChB,QAAlC,CAA4Cc,MAA5C,CALD,QAKdG,MALc,uCAME/B,CAAAA,KAAK,CAAC8B,IAAN,CAAW,mBAAX,CAAgClB,SAAhC,CANF,QAMdoB,OANc,qGAQlBX,KAAK,CAAC,iCAAD,CAAL,CARkB,QAUpBZ,QAAQ,CAAC,OAAD,CAAR,CAVoB,uEAAH,kBAAbkB,CAAAA,aAAa,8CAAnB,CAaA,mBACE,MAAC,SAAD,yBACE,cACE,SAAS,CAAC,SADZ,CAEE,WAAW,CAAC,0BAFd,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAEH,gBAJZ,EADF,cAOE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,MAFZ,CAGE,EAAE,CAAC,MAHL,CAIE,IAAI,CAAC,KAJP,CAKE,QAAQ,CAAER,gBALZ,CAME,QAAQ,CAAC,UANX,EAPF,cAeE,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEW,aAA/B,0BAfF,GADF,CAqBD,CAED,cAAevB,CAAAA,OAAf","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport moment from \"moment\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst PostPanel = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: 20px;\n  text-align: center;\n  align-items: center;\n\n  .content {\n    height: 500px;\n    width: 1000px;\n  }\n`;\n\nfunction NewPost() {\n  const id = Cookies.get(\"user-id\");\n  const [image, setImage] = useState([]);\n  const navigate = useNavigate();\n  const [inputPost, setPost] = useState({\n    id: \"\",\n    date: \"\",\n    contents: \"\",\n  });\n\n  const formData = new FormData();\n\n  const handleChangeFile = async (e) => {\n    if (e.target.files.length > 5) {\n      alert(\"파일 최대 5개만 선택가능\");\n    } else {\n      for (let i = 0; i < 5; i++) {\n        formData.append(\"img\", e.target.files[i]);\n      }\n    }\n  };\n\n  const handleChangePost = (e) => {\n    let date = moment().format(\"YYYY-MM-DD HH:mm\");\n    setPost({\n      ...inputPost,\n      contents: e.target.value,\n      id: id,\n      date: date,\n    });\n  };\n\n  const subimtOnClick = async (e) => {\n    const config = {\n      header: { \"content-type\": \"multipart/form-data\" },\n    };\n    try {\n      let result = await axios.post(\"/write/uploadImages\", formData, config);\n      let result2 = await axios.post(\"/write/uploadPost\", inputPost);\n    } catch (err) {\n      alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");\n    }\n    navigate(\"/Home\");\n  };\n\n  return (\n    <PostPanel>\n      <input\n        className=\"content\"\n        placeholder=\"내용입력\"\n        type=\"email\"\n        onChange={handleChangePost}\n      />\n      <input\n        type=\"file\"\n        className=\"file\"\n        id=\"file\"\n        name=\"img\"\n        onChange={handleChangeFile}\n        multiple=\"multiple\"\n      />\n      <button type=\"submit\" onClick={subimtOnClick}>\n        전송\n      </button>\n    </PostPanel>\n  );\n}\n\nexport default NewPost;\n"]},"metadata":{},"sourceType":"module"}