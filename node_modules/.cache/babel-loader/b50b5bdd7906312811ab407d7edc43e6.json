{"ast":null,"code":"var _jsxFileName = \"/Users/anjonghun/Desktop/4\\u1112\\u1161\\u11A8\\u1102\\u1167\\u11AB 2\\u1112\\u1161\\u11A8\\u1100\\u1175/\\u110B\\u1170\\u11B8\\u1111\\u1173\\u11AF\\u1106\\u1175\\u11BC/final_project/client/src/components/post/EditPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport moment from \"moment\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostPanel = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: 20px;\n  text-align: center;\n  align-items: center;\n\n  .content {\n    height: 500px;\n    width: 1000px;\n  }\n`;\n_c = PostPanel;\n\nfunction EditPost() {\n  _s();\n\n  const location = useLocation();\n  const id = location.state.id;\n  const [image, setImage] = useState([]);\n  const navigate = useNavigate();\n  const images = [];\n  const [inputPost, setPost] = useState({\n    id: \"\",\n    date: \"\",\n    contents: \"\"\n  });\n  useEffect(() => {\n    (async () => {\n      const temp = location.state.images;\n\n      for (let i in temp[0]) {\n        console.log(temp[0][i]);\n\n        if (temp[0][i] !== null) {\n          images.push(temp[0][i]);\n        }\n      }\n\n      setPost({ ...inputPost,\n        id: location.state.id,\n        contents: location.state.contents\n      });\n      setImage(images);\n    })();\n  }, []);\n  console.log(inputPost);\n  const formData = new FormData();\n\n  const handleChangeFile = async e => {\n    if (e.target.files.length > 5) {\n      alert(\"파일 최대 5개만 선택가능\");\n    } else {\n      for (let i = 0; i < 5; i++) {\n        formData.append(\"img\", e.target.files[i]);\n      }\n    }\n  };\n\n  const handleChangePost = e => {\n    let date = moment().format(\"YYYY-MM-DD HH:mm\");\n    setPost({ ...inputPost,\n      contents: e.target.value,\n      id: id,\n      date: date\n    });\n  };\n\n  const subimtOnClick = async e => {\n    const config = {\n      header: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n\n    try {\n      let result = await axios.post(\"/write/uploadImages\", formData, config);\n      let result2 = await axios.post(\"/write/uploadPost\", inputPost);\n    } catch (err) {\n      alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");\n    } //navigate(\"/Home\");\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(PostPanel, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"content\",\n      placeholder: \"\\uB0B4\\uC6A9\\uC785\\uB825\",\n      type: \"email\",\n      onChange: handleChangePost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      className: \"file\",\n      id: \"file\",\n      name: \"img\",\n      onChange: handleChangeFile,\n      multiple: \"multiple\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      onClick: subimtOnClick,\n      children: \"\\uC804\\uC1A1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditPost, \"gO83fHG1DiNcCRCEV8v8p18YCtY=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c2 = EditPost;\nexport default EditPost;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PostPanel\");\n$RefreshReg$(_c2, \"EditPost\");","map":{"version":3,"sources":["/Users/anjonghun/Desktop/4학년 2학기/웹플밍/final_project/client/src/components/post/EditPost.js"],"names":["React","useState","useRef","useEffect","styled","moment","Cookies","axios","useNavigate","useLocation","PostPanel","div","EditPost","location","id","state","image","setImage","navigate","images","inputPost","setPost","date","contents","temp","i","console","log","push","formData","FormData","handleChangeFile","e","target","files","length","alert","append","handleChangePost","format","value","subimtOnClick","config","header","result","post","result2","err"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport moment from \"moment\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nconst PostPanel = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  font-size: 20px;\n  text-align: center;\n  align-items: center;\n\n  .content {\n    height: 500px;\n    width: 1000px;\n  }\n`;\n\nfunction EditPost() {\n  const location = useLocation();\n  const id = location.state.id;\n  const [image, setImage] = useState([]);\n  const navigate = useNavigate();\n  const images = [];\n  const [inputPost, setPost] = useState({\n    id: \"\",\n    date: \"\",\n    contents: \"\",\n  });\n\n  useEffect(() => {\n    (async () => {\n      const temp = location.state.images;\n      for (let i in temp[0]) {\n        console.log(temp[0][i]);\n        if (temp[0][i] !== null) {\n          images.push(temp[0][i]);\n        }\n      }\n\n      setPost({\n        ...inputPost,\n        id: location.state.id,\n        contents: location.state.contents,\n      });\n      setImage(images);\n    })();\n  }, []);\n  console.log(inputPost);\n\n  const formData = new FormData();\n\n  const handleChangeFile = async (e) => {\n    if (e.target.files.length > 5) {\n      alert(\"파일 최대 5개만 선택가능\");\n    } else {\n      for (let i = 0; i < 5; i++) {\n        formData.append(\"img\", e.target.files[i]);\n      }\n    }\n  };\n\n  const handleChangePost = (e) => {\n    let date = moment().format(\"YYYY-MM-DD HH:mm\");\n    setPost({\n      ...inputPost,\n      contents: e.target.value,\n      id: id,\n      date: date,\n    });\n  };\n\n  const subimtOnClick = async (e) => {\n    const config = {\n      header: { \"content-type\": \"multipart/form-data\" },\n    };\n    try {\n      let result = await axios.post(\"/write/uploadImages\", formData, config);\n      let result2 = await axios.post(\"/write/uploadPost\", inputPost);\n    } catch (err) {\n      alert(\"지원하지않는 파일존재\\n 다른 이미지 파일을 넣어주세요.\");\n    }\n    //navigate(\"/Home\");\n  };\n\n  return (\n    <PostPanel>\n      <input\n        className=\"content\"\n        placeholder=\"내용입력\"\n        type=\"email\"\n        onChange={handleChangePost}\n      />\n      <input\n        type=\"file\"\n        className=\"file\"\n        id=\"file\"\n        name=\"img\"\n        onChange={handleChangeFile}\n        multiple=\"multiple\"\n      />\n      <button type=\"submit\" onClick={subimtOnClick}>\n        전송\n      </button>\n    </PostPanel>\n  );\n}\n\nexport default EditPost;\n"]},"metadata":{},"sourceType":"module"}